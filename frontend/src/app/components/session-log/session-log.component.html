<div class="modal modal-open">
  <div class="modal-box">
    <h3 class="font-bold text-lg">Log Reading Session</h3>

    <form [formGroup]="sessionForm" (ngSubmit)="onSubmit()" class="py-4">
      <div class="mb-4">
        <p class="text-sm text-gray-500">Total Pages: {{ totalPages }}</p>
        <p class="text-sm text-gray-500">Current Page: {{ currentPage }}</p>
        <progress class="progress progress-primary w-full" [value]="progress" max="100"></progress>
      </div>

      <div class="mb-4">
        <label for="date" class="block text-sm font-medium text-base-content">Date</label>
        <input type="date" id="date" formControlName="date" class="input input-bordered w-full mt-1" />
        <div *ngIf="sessionForm.get('date')?.invalid && sessionForm.get('date')?.touched" class="text-error text-sm mt-1">
          Date is required.
        </div>
      </div>

      <div class="mb-4">
        <label for="pagesRead" class="block text-sm font-medium text-base-content">Pages Read</label>
        <input type="number" id="pagesRead" formControlName="pagesRead" class="input input-bordered w-full mt-1" />
        <div *ngIf="sessionForm.get('pagesRead')?.invalid && sessionForm.get('pagesRead')?.touched" class="text-error text-sm mt-1">
          <span *ngIf="sessionForm.get('pagesRead')?.errors?.['required']">Pages read is required.</span>
          <span *ngIf="sessionForm.get('pagesRead')?.errors?.['min']">Pages read must be at least 1.</span>
        </div>
      </div>

      <div *ngIf="readingGoal" class="mb-4">
        <h4 class="text-md font-semibold mb-2">Goals:</h4>
        <p [ngClass]="getGoalLevelClass('low')">
          <span>Low:</span> {{ readingGoal.lowGoal }} pages
        </p>
        <p [ngClass]="getGoalLevelClass('medium')">
          <span>Medium:</span> {{ readingGoal.mediumGoal }} pages
        </p>
        <p [ngClass]="getGoalLevelClass('high')">
          <span>High:</span> {{ readingGoal.highGoal }} pages
        </p>
      </div>

      <div class="modal-action">
        <button type="submit" class="btn btn-primary" [disabled]="sessionForm.invalid || isLoading">
          <span *ngIf="isLoading" class="loading loading-spinner"></span>
          Log Session
        </button>
        <button type="button" class="btn" (click)="onCancel()">Cancel</button>
      </div>
    </form>
  </div>
</div>
