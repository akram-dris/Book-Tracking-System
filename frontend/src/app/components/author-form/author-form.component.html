<!-- Compact Modal-Style Form -->
<div class="fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50">
  <div class="bg-base-100 rounded-2xl shadow-2xl w-full max-w-xl max-h-[98vh] overflow-hidden flex flex-col">
    <!-- Minimal Header -->
    <div class="flex items-center justify-between px-5 py-3 border-b border-base-300">
      <h2 class="text-lg font-bold">{{ isEditMode ? 'Edit' : 'Add' }} Author</h2>
      <button class="btn btn-ghost btn-circle btn-xs" routerLink="/authors">
        <ng-icon name="heroXMark" size="1rem"></ng-icon>
      </button>
    </div>

    <!-- Form Content -->
    <form [formGroup]="authorForm" (ngSubmit)="onSubmit()" class="flex-1 overflow-y-auto">
      <div class="p-5 pb-8 space-y-3">
        <div class="grid grid-cols-12 gap-6">
          <!-- Compact Image Upload -->
          <div class="col-span-5">
            <div class="aspect-[3/4] w-full min-w-[140px]">
              <!-- Upload Area -->
              <div
                *ngIf="!imagePreviewUrl"
                (click)="fileInput.click()"
                class="h-full w-full border-2 border-dashed border-base-300 hover:border-primary rounded-lg bg-base-200 hover:bg-base-300 transition-all cursor-pointer flex items-center justify-center"
              >
                <div class="flex flex-col items-center justify-center p-2">
                  <ng-icon name="heroPhoto" size="2rem" class="text-base-content/30 mb-1"></ng-icon>
                  <p class="text-xs text-base-content/50 text-center">Drop or click</p>
                </div>
              </div>

              <!-- Image Preview -->
              <div *ngIf="imagePreviewUrl" class="relative group h-full w-full">
                <div class="h-full w-full rounded-lg overflow-hidden bg-base-300 border-2 border-base-300" (click)="fileInput.click()">
                  <img [src]="imagePreviewUrl" alt="Author photo" class="w-full h-full object-cover cursor-pointer" />
                </div>
                <button
                  type="button"
                  (click)="removeImage($event)"
                  class="absolute -top-1 -right-1 btn btn-circle btn-xs bg-error hover:bg-error/90 text-white border-0 opacity-0 group-hover:opacity-100 transition-opacity"
                >
                  <ng-icon name="heroXMark" size="0.75rem"></ng-icon>
                </button>
              </div>
              <input type="file" #fileInput class="hidden" (change)="onFileSelected($event)" accept="image/*" />
            </div>
          </div>

          <!-- Form Fields -->
          <div class="col-span-7 pl-6">
            <!-- Name -->
            <div class="form-control">
              <label class="label py-0 pb-0.5">
                <span class="label-text text-xs font-medium">Name <span class="text-error">*</span></span>
              </label>
              <input
                type="text"
                formControlName="name"
                class="input input-sm input-bordered w-full"
                placeholder="Author name"
                [class.input-error]="authorForm.get('name')?.invalid && authorForm.get('name')?.touched"
              />
            </div>

            <!-- Bio -->
            <div class="form-control">
              <label class="label py-0 pb-0.5">
                <span class="label-text text-xs font-medium">Biography</span>
              </label>
              <textarea
                formControlName="bio"
                class="textarea textarea-sm textarea-bordered w-full h-32"
                placeholder="Author biography..."
              ></textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer Actions -->
      <div class="flex items-center justify-end gap-2 px-5 py-3 border-t border-base-300 bg-base-200/50">
        <button type="button" class="btn btn-sm btn-ghost" routerLink="/authors">Cancel</button>
        <button type="submit" class="btn btn-sm btn-primary" [disabled]="authorForm.invalid || isLoading">
          <span *ngIf="isLoading" class="loading loading-spinner loading-xs"></span>
          {{ isEditMode ? 'Update' : 'Create' }}
        </button>
      </div>
    </form>
  </div>
</div>