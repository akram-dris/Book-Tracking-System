<div *ngIf="author" class="min-h-screen bg-base-100">
  <!-- Back Button -->
  <div class="mb-6">
    <button (click)="goBack()" class="btn btn-ghost btn-sm gap-2 hover:bg-primary/10 hover:text-primary transition-all duration-200">
      <ng-icon name="heroArrowLeft" size="1.25rem"></ng-icon>
      Back
    </button>
  </div>

  <!-- Hero Section -->
  <div class="bg-base-200 rounded-2xl border-2 border-base-300 hover:border-primary/30 shadow-xl transition-all duration-300 overflow-hidden mb-6">
    <div class="p-8">
      <div class="flex flex-col md:flex-row gap-8 items-start">
        <!-- Author Image -->
        <div class="flex-shrink-0">
          <div class="relative group">
            <div class="w-48 h-48 rounded-2xl overflow-hidden border-2 border-base-300 hover:border-primary shadow-xl hover:shadow-2xl hover:shadow-primary/20 transition-all duration-300">
              <img 
                [src]="author.imageUrl ? (rootUrl + author.imageUrl) : '/assets/placeholder-author.png'" 
                [alt]="author.name"
                class="w-full h-full object-cover group-hover:scale-110 group-hover:brightness-90 transition-all duration-500"
                (error)="onImageError($event)"
              />
            </div>
            <!-- Overlay on hover -->
            <div class="absolute inset-0 bg-gradient-to-t from-primary/60 via-primary/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
          </div>
        </div>

        <!-- Author Info -->
        <div class="flex-1">
          <h1 class="text-4xl font-bold mb-2 text-base-content">{{ author.name }}</h1>
          <p *ngIf="author.createdAt" class="text-sm text-base-content/50 mb-6">Added {{ author.createdAt | date:'MMM dd, yyyy' }}</p>
          
          <!-- Statistics Cards -->
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-base-100 rounded-xl p-4 border-2 border-base-300 hover:border-primary hover:shadow-lg hover:shadow-primary/10 transition-all duration-300 hover:-translate-y-1">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center">
                  <ng-icon name="heroBookOpen" size="1.5rem" class="text-primary"></ng-icon>
                </div>
                <div>
                  <div class="text-2xl font-bold text-primary">{{ totalBooks }}</div>
                  <div class="text-xs text-base-content/60">Total Books</div>
                </div>
              </div>
            </div>
            
            <div class="bg-base-100 rounded-xl p-4 border-2 border-base-300 hover:border-accent hover:shadow-lg hover:shadow-accent/10 transition-all duration-300 hover:-translate-y-1">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-lg bg-accent/10 flex items-center justify-center">
                  <ng-icon name="heroCheckCircle" size="1.5rem" class="text-accent"></ng-icon>
                </div>
                <div>
                  <div class="text-2xl font-bold text-accent">{{ booksCompleted }}</div>
                  <div class="text-xs text-base-content/60">Completed</div>
                </div>
              </div>
            </div>
            
            <div class="bg-base-100 rounded-xl p-4 border-2 border-base-300 hover:border-warning hover:shadow-lg hover:shadow-warning/10 transition-all duration-300 hover:-translate-y-1">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-lg bg-warning/10 flex items-center justify-center">
                  <ng-icon name="heroBookOpen" size="1.5rem" class="text-warning"></ng-icon>
                </div>
                <div>
                  <div class="text-2xl font-bold text-warning">{{ booksReading }}</div>
                  <div class="text-xs text-base-content/60">Reading</div>
                </div>
              </div>
            </div>
            
            <div class="bg-base-100 rounded-xl p-4 border-2 border-base-300 hover:border-secondary hover:shadow-lg hover:shadow-secondary/10 transition-all duration-300 hover:-translate-y-1">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-lg bg-secondary/10 flex items-center justify-center">
                  <ng-icon name="heroDocumentText" size="1.5rem" class="text-secondary"></ng-icon>
                </div>
                <div>
                  <div class="text-2xl font-bold text-secondary">{{ totalPagesRead }}</div>
                  <div class="text-xs text-base-content/60">Pages Read</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Biography Section -->
          <div *ngIf="author.bio" class="bg-base-100 rounded-xl p-6 border-2 border-base-300 hover:border-primary/30 transition-all duration-300 mb-6">
            <div class="flex items-center justify-between mb-3">
              <h2 class="text-lg font-semibold flex items-center gap-2">
                <ng-icon name="heroDocumentText" size="1.25rem" class="text-primary"></ng-icon>
                Biography
              </h2>
              <button 
                *ngIf="author.bio && author.bio.length > 200"
                (click)="toggleBio()" 
                class="btn btn-ghost btn-xs hover:bg-primary/10 hover:text-primary transition-all duration-200"
              >
                {{ bioExpanded ? 'Show Less' : 'Show More' }}
              </button>
            </div>
            <p class="text-base-content/70 leading-relaxed" [class.line-clamp-3]="!bioExpanded && author.bio && author.bio.length > 200">
              {{ author.bio }}
            </p>
          </div>

          <!-- Action Buttons -->
          <div class="flex gap-3">
            <a [routerLink]="['/authors/edit', author.id]" class="btn btn-ghost btn-sm gap-2 hover:bg-primary/10 hover:text-primary hover:scale-105 transition-all duration-200 border-2 border-transparent hover:border-primary/20">
              <ng-icon name="heroPencilSquare" size="1.25rem"></ng-icon>
              Edit Author
            </a>
            <button (click)="deleteAuthor()" class="btn btn-error btn-outline btn-sm gap-2 hover:scale-105 transition-all duration-200 border-2">
              <ng-icon name="heroTrash" size="1.25rem"></ng-icon>
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Books Section -->
  <div class="bg-base-200 rounded-2xl border-2 border-base-300 hover:border-primary/30 shadow-xl transition-all duration-300 p-6">
    <h2 class="text-2xl font-bold mb-6 text-base-content flex items-center gap-2">
      <ng-icon name="heroBookOpen" size="1.5rem" class="text-primary"></ng-icon>
      Books by {{ author.name }}
    </h2>
    
    <!-- Empty State -->
    <div *ngIf="authorBooks.length === 0" class="text-center py-16">
      <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-primary/10 border-2 border-primary/20 flex items-center justify-center">
        <ng-icon name="heroBookOpen" size="3rem" class="text-primary"></ng-icon>
      </div>
      <p class="text-xl text-base-content/70 font-medium">No books yet</p>
      <p class="text-sm text-base-content/50 mt-2">Add the first book by this author</p>
      <a routerLink="/books/new" class="btn btn-primary btn-sm mt-4 rounded-xl shadow-lg shadow-primary/30 hover:brightness-110 hover:scale-105 transition-all duration-200">
        <ng-icon name="heroPlus" size="1rem"></ng-icon>
        Add First Book
      </a>
    </div>

    <!-- Books Grid -->
    <div *ngIf="authorBooks.length > 0" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
      <a 
        *ngFor="let book of authorBooks" 
        [routerLink]="['/books', book.id]"
        class="bg-base-100 rounded-xl shadow-lg hover:shadow-2xl hover:shadow-primary/20 transition-all duration-300 hover:-translate-y-1 border-2 border-base-300 hover:border-primary overflow-hidden group cursor-pointer"
      >
        <!-- Book Cover -->
        <figure class="relative aspect-[2/3] overflow-hidden bg-gradient-to-br from-base-300 to-base-200">
          <img 
            [src]="book.imageUrl ? (rootUrl + book.imageUrl) : '/assets/placeholder-book.png'" 
            [alt]="book.title"
            class="w-full h-full object-cover group-hover:scale-110 group-hover:brightness-90 transition-all duration-500"
          />
          
          <!-- Hover Overlay -->
          <div class="absolute inset-0 bg-gradient-to-t from-primary/80 via-primary/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
          
          <!-- Status Badge -->
          <div class="absolute top-2 right-2 z-10">
            <div class="badge badge-sm {{ getStatusClass(book) }} shadow-xl border-0 hover:scale-110 transition-transform duration-200">
              {{ getStatusText(book) }}
            </div>
          </div>

          <!-- Book Info on Hover -->
          <div class="absolute bottom-0 left-0 right-0 p-3 translate-y-full group-hover:translate-y-0 transition-transform duration-300 z-10">
            <h3 class="text-white font-bold text-sm line-clamp-2 drop-shadow-lg">{{ book.title }}</h3>
            <p class="text-white/90 text-xs mt-1 drop-shadow-md">{{ book.totalPages }} pages</p>
          </div>
        </figure>
      </a>
    </div>
  </div>
</div>